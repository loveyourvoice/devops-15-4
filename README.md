# Задание 1. Yandex Cloud
### Настроить с помощью Terraform кластер баз данных MySQL

>Используя настройки VPC из предыдущих домашних заданий, добавить дополнительно подсеть private в разных зонах, чтобы обеспечить отказоустойчивость.\
![img.png](img/img.png)

> Разместить ноды кластера MySQL в разных подсетях.\
> ![img_1.png](img/img_1.png)

> Необходимо предусмотреть репликацию с произвольным временем технического обслуживания.\
> ![img_2.png](img/img_2.png)

> Использовать окружение Prestable, платформу Intel Broadwell с производительностью 50% CPU и размером диска 20 Гб.\
> ![img_3.png](img/img_3.png)

> Задать время начала резервного копирования — 23:59.\
> ![img_4.png](img/img_4.png)

> Включить защиту кластера от непреднамеренного удаления.\
> ![img_5.png](img/img_5.png)
 
> Создать БД с именем netology_db, логином и паролем.\
> ![img_6.png](img/img_6.png)
 
> Судя по plan проблемы вряд-ли возникнут, пока деплоить не буду, так как это занимает много времени, совершу деплой вместе со вторым заданием\
> ![img_7.png](img/img_7.png)

### Настроить с помощью Terraform кластер Kubernetes.
> Используя настройки VPC из предыдущих домашних заданий, добавить дополнительно две подсети public в разных зонах, чтобы обеспечить отказоустойчивость
> ![img_8.png](img/img_8.png)

> Создать отдельный сервис-аккаунт с необходимыми правами.\
> ![img_9.png](img/img_9.png)

> Создать региональный мастер Kubernetes с размещением нод в трёх разных подсетях.
> ![img_10.png](img/img_10.png)

> Добавить возможность шифрования ключом из KMS, созданным в предыдущем домашнем задании.\
> ![img_10.png](img/img_10.png)

> Создать группу узлов, состояющую из трёх машин с автомасштабированием до шести.
> ![img_11.png](img/img_11.png)

> Подключиться к кластеру с помощью kubectl.\
> При деплои возникли некоторые проблемы, например полурабочая C зона(изменил на d), а так же некоторые устаревшие параметры, скрины не стал переделывать, но все tf файлы доведены до идеала и отработали без ошибок, так же instance надо было разделить, по причине того что, автоскейл работает только в одной зоне.
> ![img_13.png](img/img_13.png)
> ![img_12.png](img/img_12.png)

> *Запустить микросервис phpmyadmin и подключиться к ранее созданной БД.
> [pma](pma)

> *Создать сервис-типы Load Balancer и подключиться к phpmyadmin. Предоставить скриншот с публичным адресом и подключением к БД.
> ![img_14.png](img/img_14.png)